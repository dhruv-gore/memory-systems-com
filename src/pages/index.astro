---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allNotes = (await getCollection('notes')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
const recentNotes = allNotes.slice(0, 3);
---

<Layout title="Index">
	<section class="mb-16">
		<h1 class="font-serif text-4xl md:text-5xl italic text-stone-900 mb-6 leading-tight">
			A forum for the study of <span class="text-red-700">memory</span> in all its forms.
		</h1>
		<p class="text-stone-600 leading-relaxed max-w-lg">
			We are a small group of enthusiasts exploring how information persists in biological brains, artificial networks, and human societies.
		</p>
	</section>

	<section>
		<div class="flex items-baseline justify-between mb-8 border-b border-stone-200 pb-2">
			<h2 class="font-mono text-xs uppercase tracking-widest text-stone-400">Recent Meetup Notes</h2>
			<a href="/notes" class="text-xs font-mono text-red-700 hover:text-red-800 transition-colors">View all â†’</a>
		</div>

		<div class="space-y-8">
			{recentNotes.map((note) => (
				<article class="group">
					<a href={`/notes/${note.slug}`} class="block">
						<div class="flex flex-col md:flex-row md:items-baseline justify-between gap-2 mb-1">
							<h3 class="font-serif text-xl text-stone-900 group-hover:text-red-700 transition-colors">
								{note.data.title}
							</h3>
							<time datetime={note.data.pubDate.toISOString()} class="font-mono text-xs text-stone-400 shrink-0">
								{note.data.pubDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}
							</time>
						</div>
						<p class="text-sm text-stone-500 line-clamp-2 leading-relaxed max-w-xl">
							{note.data.description}
						</p>
					</a>
				</article>
			))}
		</div>
	</section>
</Layout>