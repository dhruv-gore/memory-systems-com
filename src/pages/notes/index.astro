---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allNotes = (await getCollection('notes')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Notes">
	<header class="mb-12">
		<h1 class="font-serif text-3xl italic text-stone-900">Notes & Reflections</h1>
	</header>

	<div class="space-y-10">
		{allNotes.map((note) => (
			<article class="group relative pl-4 border-l border-stone-200 hover:border-red-300 transition-colors duration-300">
				<a href={`/notes/${note.slug}`} class="block">
					<div class="mb-2">
						<time datetime={note.data.pubDate.toISOString()} class="block font-mono text-xs text-stone-400 mb-1">
							{note.data.pubDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}
						</time>
						<h2 class="font-serif text-2xl text-stone-900 group-hover:text-red-700 transition-colors">
							{note.data.title}
						</h2>
					</div>
					<p class="text-stone-600 leading-relaxed max-w-xl mb-3">
						{note.data.description}
					</p>
					<div class="flex gap-2">
						{note.data.tags?.map(tag => (
							<span class="text-[10px] uppercase tracking-wider text-stone-400 bg-stone-50 px-1.5 py-0.5 rounded">
								{tag}
							</span>
						))}
					</div>
				</a>
			</article>
		))}
	</div>
</Layout>
