---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
	const notes = await getCollection('notes');
	return notes.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title}>
	<article class="prose prose-stone prose-headings:font-serif prose-headings:font-normal prose-a:text-red-700 hover:prose-a:text-red-800 max-w-none">
		<header class="mb-10 not-prose">
			<div class="font-mono text-xs text-stone-400 mb-4">
				<a href="/notes" class="hover:text-stone-600 transition-colors">‚Üê Back to Notes</a>
			</div>
			<h1 class="font-serif text-4xl italic text-stone-900 mb-4 leading-tight">{entry.data.title}</h1>
			<div class="flex items-center gap-4 text-xs font-mono text-stone-500">
				<time datetime={entry.data.pubDate.toISOString()}>
					{entry.data.pubDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}
				</time>
				<span>/</span>
				<span>{entry.data.author}</span>
			</div>
		</header>
		
		<Content />
	</article>
</Layout>
